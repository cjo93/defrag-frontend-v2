# Environment Variable Manifest

## Backend (defrag-api)
*Vercel Project: defrag-api*

| Variable | Scope | Description |
| :--- | :--- | :--- |
| `SUPABASE_URL` | Production | Supabase API URL |
| `SUPABASE_SERVICE_ROLE_KEY` | Production | Critical. Admin key for background jobs. |
| `NEXT_PUBLIC_SUPABASE_URL` | Production | Public URL for client logic. |
| `DEFRAG_ADMIN_KEY` | Production | Secret key for protecting manual admin/recompute routes. |
| `CRON_SECRET` | Production | Auto-generated by Vercel Cron integration (or set manually). |
| `R2_ENDPOINT` | Production | `https://<account_id>.r2.cloudflarestorage.com` |
| `R2_ACCESS_KEY_ID` | Production | R2 Token Access Key |
| `R2_SECRET_ACCESS_KEY` | Production | R2 Token Secret |
| `R2_BUCKET` | Production | Name of the bucket (e.g., `defrag-assets`) |
| `R2_PUBLIC_BASE_URL` | Production | Public domain mapped to bucket (e.g., `https://assets.defrag.app`) |
| `STRIPE_SECRET_KEY` | Production | Live Secret Key |
| `STRIPE_WEBHOOK_SECRET` | Production | Live Webhook Signing Secret |
| `STRIPE_PRICE_BLUEPRINT` | Production | Live Price ID |
| `STRIPE_PRICE_OS` | Production | Live Price ID |
| `AI_GATEWAY_URL` | Production | `https://ai-gateway.vercel.sh/v1` |
| `OPENAI_API_KEY` | Production | OpenAI Key |

## Frontend (defrag-web)
*Vercel Project: defrag-web*

| Variable | Scope | Description |
| :--- | :--- | :--- |
| `NEXT_PUBLIC_SUPABASE_URL` | Production | Matches backend. |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | Production | Anon key for auth client. |
| `NEXT_PUBLIC_API_URL` | Production | Must be `https://api.defrag.app` |

**DO NOT** set service keys or stripe secrets in Frontend.
